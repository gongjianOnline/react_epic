(this.webpackJsonpepic=this.webpackJsonpepic||[]).push([[2],{119:function(e,t,n){"use strict";n.r(t);var r,i,o,c,s,a,l,p=n(0),u=n(15),b=n.n(u),f=n(6),j=(n(73),n(18)),O=n(36),h=n(19),y=n(120),g=n(60),d=n(63),m=n(2),v=h.a.header(r||(r=Object(j.a)(["\n  background: #02101f;\n  padding: 10px 100px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  color: #fff;\n"]))),w=h.a.nav(i||(i=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]))),x=h.a.div(o||(o=Object(j.a)(["\n  color: #fff;\n  height: 30px;\n"]))),U=Object(h.a)(O.b)(c||(c=Object(j.a)(["\n  color:#fff;\n  margin-left: 30px;\n  \n  &.active {\n    border-bottom:1px solid #fff;\n  }\n"]))),P=h.a.div(s||(s=Object(j.a)(["\n  margin-left:20px\n"]))),k=Object(h.a)(y.a)(a||(a=Object(j.a)(["\n  margin-left: 10px;\n"]))),F=Object(d.a)((function(){var e=Object(f.f)(),t=Object(g.a)(),n=t.UserStore,r=t.AuthStore;return Object(m.jsxs)(v,{children:[Object(m.jsx)(x,{children:Object(m.jsx)("svg",{className:"icon iconLogn","aria-hidden":"true",children:Object(m.jsx)("use",{xlinkHref:"#icon-tu"})})}),Object(m.jsxs)(w,{children:[Object(m.jsx)(U,{to:"/",activeClassName:"active",exact:!0,children:"\u9996\u9875"}),Object(m.jsx)(U,{to:"/history",children:"\u4e0a\u4f20\u5386\u53f2"}),Object(m.jsx)(P,{children:n.currentUser?Object(m.jsxs)(m.Fragment,{children:[n.currentUser.attributes.username," ",Object(m.jsx)(k,{type:"primary",onClick:function(){r.logout()},children:"\u6ce8\u9500"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(k,{type:"primary",onClick:function(){console.log("\u8df3\u8f49\u5230\u767b\u9304\u9801"),e.push("/login")},children:"\u767b\u5f55"}),Object(m.jsx)(k,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875"),e.push("/register")},children:"\u6ce8\u518c"})]})})]})]})})),z=h.a.footer(l||(l=Object(j.a)(["\n  padding: 10px 100px;\n  text-align: center;\n  font-size: 12px;\n  color:#aaa\n"])));var D=function(){return Object(m.jsx)(z,{children:Object(m.jsx)("div",{children:"Footer"})})};var L=function(){return Object(m.jsx)("div",{children:"Loding..."})},C=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,285))})),I=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,286))})),S=Object(p.lazy)((function(){return n.e(7).then(n.bind(null,277))})),M=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,278))})),N=Object(p.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,279))}));var A=function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)(F,{}),Object(m.jsx)(p.Suspense,{fallback:Object(m.jsx)(L,{}),children:Object(m.jsx)("main",{children:Object(m.jsxs)(f.c,{children:[Object(m.jsx)(f.a,{path:"/",exact:!0,component:C}),Object(m.jsx)(f.a,{path:"/history",component:I}),Object(m.jsx)(f.a,{path:"/about",component:S}),Object(m.jsx)(f.a,{path:"/login",component:M}),Object(m.jsx)(f.a,{path:"/register",component:N})]})})}),Object(m.jsx)(D,{})]})},Q=(n(118),function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,280)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),o(e),c(e)}))});b.a.render(Object(m.jsx)(O.a,{children:Object(m.jsx)(A,{})}),document.getElementById("root")),Q()},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return Q}));var r=n(0),i=n(12),o=n(24),c=n(25),s=n(4),a=(n(46),n(1)),l=n(16),p=n.n(l);p.a.init({appId:"3pNPM91YdLJ2QFGd28vYprj4-gzGzoHsz",appKey:"n7MQNhmiQRqaL4EwWC0AjFOq",serverURL:"https://3pnpm91y.lc-cn-n1-shared.com"});var u,b,f,j,O,h,y,g,d,m,v,w,x,U,P=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},k=function(e,t){return new Promise((function(n,r){l.User.logIn(e,t).then((function(e){return n(e)}),(function(e){return r(e)}))}))},F=function(){l.User.logOut()},z=function(){return l.User.current()},D=function(e,t){var n=new p.a.Object("Image"),r=new p.a.File(t,e);return n.set("filename",t),n.set("owner",p.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){console.log("\u4fdd\u5b58\u6210\u529f"),e(t)}),(function(e){console.log("\u4fdd\u5b58\u5931\u8d25"),t(e)}))}))},L=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,o=new p.a.Query("Image");return o.include("owner"),o.limit(i),o.skip(n*i),o.equalTo("owner",p.a.User.current()),new Promise((function(e,t){o.find().then((function(t){e(t)})).catch((function(e){t(e)}))}))},C=new(u=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"currentUser",b,this),Object(a.m)(this)}return Object(c.a)(e,[{key:"pullUser",value:function(){this.currentUser=z()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),b=Object(s.a)(u.prototype,"currentUser",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(s.a)(u.prototype,"pullUser",[a.f],Object.getOwnPropertyDescriptor(u.prototype,"pullUser"),u.prototype),Object(s.a)(u.prototype,"resetUser",[a.f],Object.getOwnPropertyDescriptor(u.prototype,"resetUser"),u.prototype),u),I=n(122),S=new(f=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"list",j,this),Object(i.a)(this,"isLoading",O,this),Object(i.a)(this,"hasMore",h,this),Object(i.a)(this,"page",y,this),this.limit=10,Object(a.m)(this)}return Object(c.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,L({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){console.log(e),I.b.error("\u52a0\u8f7d\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),j=Object(s.a)(f.prototype,"list",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=Object(s.a)(f.prototype,"isLoading",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=Object(s.a)(f.prototype,"hasMore",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),y=Object(s.a)(f.prototype,"page",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(s.a)(f.prototype,"append",[a.f],Object.getOwnPropertyDescriptor(f.prototype,"append"),f.prototype),Object(s.a)(f.prototype,"find",[a.f],Object.getOwnPropertyDescriptor(f.prototype,"find"),f.prototype),Object(s.a)(f.prototype,"reset",[a.f],Object.getOwnPropertyDescriptor(f.prototype,"reset"),f.prototype),f),M=new(g=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"filename",d,this),Object(i.a)(this,"file",m,this),Object(i.a)(this,"isUploading",v,this),Object(i.a)(this,"serverFile",w,this),Object(a.m)(this)}return Object(c.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upload",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){D(e.file,e.filename).then((function(n){console.log("\u4e0a\u4f20\u6210\u529f"),e.serverFile=n,t(n)})).catch((function(e){I.b.error("\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),d=Object(s.a)(g.prototype,"filename",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),m=Object(s.a)(g.prototype,"file",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Object(s.a)(g.prototype,"isUploading",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),w=Object(s.a)(g.prototype,"serverFile",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(s.a)(g.prototype,"setFilename",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"setFilename"),g.prototype),Object(s.a)(g.prototype,"setFile",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"setFile"),g.prototype),Object(s.a)(g.prototype,"upload",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"upload"),g.prototype),Object(s.a)(g.prototype,"reset",[a.f],Object.getOwnPropertyDescriptor(g.prototype,"reset"),g.prototype),g),N=new(x=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"values",U,this),Object(a.m)(this)}return Object(c.a)(e,[{key:"setIsLogin",value:function(e){this.isLogin=e}},{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){k(e.values.username,e.values.password).then((function(e){C.pullUser(),t(e)})).catch((function(e){C.resetUser(),I.b.error("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){P(e.values.username,e.values.password).then((function(e){C.pullUser(),t(e)})).catch((function(e){C.resetUser(),I.b.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){F(),C.resetUser(),S.reset(),M.reset()}}]),e}(),U=Object(s.a)(x.prototype,"values",[a.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(s.a)(x.prototype,"setIsLogin",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"setIsLogin"),x.prototype),Object(s.a)(x.prototype,"setUsername",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"setUsername"),x.prototype),Object(s.a)(x.prototype,"setPassword",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"setPassword"),x.prototype),Object(s.a)(x.prototype,"login",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"login"),x.prototype),Object(s.a)(x.prototype,"register",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"register"),x.prototype),Object(s.a)(x.prototype,"logout",[a.f],Object.getOwnPropertyDescriptor(x.prototype,"logout"),x.prototype),x),A=Object(r.createContext)({AuthStore:N,UserStore:C,ImageStore:M,HistoryStore:S}),Q=function(){return Object(r.useContext)(A)}},73:function(e,t,n){}},[[119,3,4]]]);
//# sourceMappingURL=main.42af4dd7.chunk.js.map