{"version":3,"sources":["components/Header.js","components/Footer.js","components/Loading.js","App.js","reportWebVitals.js","index.js","models/index.js","stores/user.js","stores/history.js","stores/image.js","stores/auth.js","stores/index.js"],"names":["Header","styled","header","Nav","nav","Logo","div","StyledLink","NavLink","Login","StyledButton","Button","Component","observer","history","useHistory","useStores","UserStore","AuthStore","className","aria-hidden","xlinkHref","to","activeClassName","exact","currentUser","attributes","username","type","onClick","logout","console","log","push","StyledFooter","footer","Footer","Loading","Home","lazy","History","About","Register","App","fallback","path","component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById","AV","init","appId","appKey","serverURL","Auth","password","user","User","setUsername","setPassword","Promise","resolve","reject","signUp","loginedUser","error","logIn","logOut","current","Uploader","file","filename","item","Object","avFile","File","set","save","serverFile","page","limit","query","Query","include","skip","equalTo","find","resulte","catch","makeObservable","this","observable","action","newList","list","concat","isLoading","append","length","hasMore","message","finally","newFilename","newFile","isUploading","err","isLogin","values","pullUser","resetUser","HistoryStore","reset","ImageStores","context","createContext","ImageStore","useContext"],"mappings":"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","file":"static/js/main.42af4dd7.chunk.js","sourcesContent":["import React from \"react\"\r\nimport {NavLink,useHistory} from \"react-router-dom\"\r\nimport styled from \"styled-components\";\r\nimport {Button} from \"antd\";\r\nimport {useStores} from \"../stores/index\";\r\nimport {observer} from \"mobx-react\"\r\n\r\n\r\nconst Header = styled.header`\r\n  background: #02101f;\r\n  padding: 10px 100px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  color: #fff;\r\n`;\r\nconst Nav = styled.nav`\r\n  display: flex;\r\n  align-items: center;\r\n`\r\nconst Logo = styled.div`\r\n  color: #fff;\r\n  height: 30px;\r\n`;\r\nconst StyledLink = styled(NavLink)`\r\n  color:#fff;\r\n  margin-left: 30px;\r\n  \r\n  &.active {\r\n    border-bottom:1px solid #fff;\r\n  }\r\n`;\r\nconst Login = styled.div`\r\n  margin-left:20px\r\n`\r\nconst StyledButton = styled(Button)`\r\n  margin-left: 10px;\r\n`\r\nconst Component = observer(()=>{\r\n  const history = useHistory()\r\n  const {UserStore,AuthStore} = useStores();\r\n  const handleLogout = ()=>{\r\n    AuthStore.logout()\r\n  };\r\n  const handleLogin = ()=>{\r\n    console.log(\"跳轉到登錄頁\")\r\n    history.push('/login')\r\n  };\r\n  const handleRegister = ()=>{\r\n    console.log(\"跳转到注册页\");\r\n    history.push('/register')\r\n  };\r\n  return(\r\n    <Header>\r\n      <Logo>\r\n        <svg className=\"icon iconLogn\" aria-hidden=\"true\">\r\n          <use xlinkHref=\"#icon-tu\"></use>\r\n        </svg>\r\n      </Logo>\r\n      <Nav>\r\n        <StyledLink to='/' activeClassName=\"active\" exact>首页</StyledLink>\r\n        <StyledLink to='/history'>上传历史</StyledLink>\r\n        {/*<StyledLink to='/about'>关于</StyledLink>*/}\r\n        <Login>\r\n          {\r\n            UserStore.currentUser ? <>\r\n              {UserStore.currentUser.attributes.username} <StyledButton type=\"primary\" onClick={handleLogout}>注销</StyledButton>\r\n            </> :<>\r\n              <StyledButton type=\"primary\" onClick={handleLogin}>登录</StyledButton>\r\n              <StyledButton type=\"primary\" onClick={handleRegister}>注册</StyledButton>\r\n            </>\r\n\r\n          }\r\n        </Login>\r\n      </Nav>\r\n    </Header>\r\n  )\r\n})\r\nexport default Component","import React from \"react\"\r\nimport styled from \"styled-components\"\r\nconst StyledFooter = styled.footer`\r\n  padding: 10px 100px;\r\n  text-align: center;\r\n  font-size: 12px;\r\n  color:#aaa\r\n`\r\nfunction Footer(){\r\n  return(\r\n    <StyledFooter>\r\n      <div>Footer</div>\r\n    </StyledFooter>\r\n  )\r\n}\r\nexport default Footer","import React from \"react\"\r\nfunction Loading(){\r\n  return(\r\n    <div>Loding...</div>\r\n  )\r\n}\r\nexport default Loading","import React,{Suspense,lazy} from \"react\"\r\nimport {Switch, Route} from \"react-router-dom\"\r\nimport \"./App.css\"\r\nimport Header from \"./components/Header\"\r\nimport Footer from \"./components/Footer\"\r\nimport Loading from \"./components/Loading\"\r\n\r\n// import Home from \"./pages/Home\"\r\n// import History from \"./pages/History\"\r\n// import About from \"./pages/About\"\r\nconst Home = lazy(()=>import('./pages/Home'))\r\nconst History = lazy(()=>import('./pages/History'))\r\nconst About = lazy(()=>import('./pages/About'))\r\nconst Login = lazy(()=>import('./pages/Login'))\r\nconst Register = lazy(()=>import('./pages/Register'))\r\n\r\n\r\n\r\nfunction App() {\r\n  return (\r\n    <div className=\"App\">\r\n      <Header></Header>\r\n      <Suspense fallback={<Loading/>}>\r\n        <main>\r\n          <Switch>\r\n            <Route path='/' exact component={Home}/>\r\n            <Route path='/history' component={History}/>\r\n            <Route path='/about' component={About}/>\r\n            <Route path='/login' component={Login}/>\r\n            <Route path='/register' component={Register}/>\r\n          </Switch>\r\n        </main>\r\n      </Suspense>\r\n      <Footer></Footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport \"./App.css\"\r\nimport \"antd/dist/antd.css\"\r\nimport reportWebVitals from './reportWebVitals';\r\nimport {\r\n  HashRouter as Router\r\n} from \"react-router-dom\"\r\n\r\nReactDOM.render(\r\n    <Router>\r\n      <App></App>\r\n    </Router>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","import AV, { Query, User } from 'leancloud-storage';\r\n\r\nAV.init({\r\n  appId: \"3pNPM91YdLJ2QFGd28vYprj4-gzGzoHsz\",\r\n  appKey: \"n7MQNhmiQRqaL4EwWC0AjFOq\",\r\n  serverURL: \"https://3pnpm91y.lc-cn-n1-shared.com\"\r\n});\r\n/*登录注册*/\r\nconst Auth = {\r\n  register(username, password) {\r\n    let user = new User();\r\n    user.setUsername(username);\r\n    user.setPassword(password);\r\n    return new Promise((resolve, reject) => {\r\n      user.signUp().then(loginedUser => resolve(loginedUser), error => reject(error))\r\n    });\r\n  },\r\n\r\n  login(username, password) {\r\n    return new Promise((resolve, reject) => {\r\n      User.logIn(username, password)\r\n        .then(loginedUser => resolve(loginedUser), error => reject(error));\r\n    });\r\n  },\r\n\r\n  logout() {\r\n    User.logOut();\r\n  },\r\n\r\n  getCurrentUser() {\r\n    return User.current();\r\n  }\r\n\r\n}\r\n\r\n/*文件存储*/\r\nconst Uploader = {\r\n  add(file,filename){\r\n    const item = new AV.Object('Image');\r\n    const avFile = new AV.File(filename,file)\r\n    item.set('filename',filename);\r\n    item.set('owner',AV.User.current());\r\n    item.set('url',avFile)\r\n    return new Promise((resolve,reject)=>{\r\n      item.save().then((serverFile)=>{\r\n        console.log(\"保存成功\")\r\n        resolve(serverFile)\r\n      },error=>{\r\n        console.log(\"保存失败\")\r\n        reject(error)\r\n      })\r\n    })\r\n  },\r\n  /*查找历史*/\r\n  find({page=0,limit=10}){\r\n    const query = new AV.Query(\"Image\")\r\n    query.include('owner');\r\n    query.limit(limit);\r\n    query.skip(page*limit);\r\n    query.equalTo('owner',AV.User.current());\r\n    return new Promise((resolve,reject)=>{\r\n      query.find().then((resulte)=>{\r\n        resolve(resulte)\r\n      }).catch((error)=>{\r\n        reject(error)\r\n      })\r\n    })\r\n  }\r\n\r\n\r\n}\r\n/**/\r\n\r\nexport {Auth,Uploader};","/*\r\n*   作用: 专门用来获取用户的登录状态和用户信息\r\n* */\r\nimport {observable, action,makeObservable} from \"mobx\";\r\nimport {Auth} from \"../models/index\"\r\nclass UserStore {\r\n  constructor() {\r\n    makeObservable(this)\r\n  }\r\n  @observable currentUser = null;\r\n\r\n  @action pullUser(){\r\n    this.currentUser = Auth.getCurrentUser()\r\n  }\r\n\r\n  @action resetUser(){\r\n    this.currentUser = null\r\n  }\r\n\r\n}\r\nexport default new UserStore()","/*\r\n*   作用: 专门用来管理历史数据状态\r\n* */\r\nimport {observable, action,makeObservable} from \"mobx\";\r\nimport {Uploader} from \"../models/index\"\r\nimport {message} from \"antd\";\r\n\r\nclass HistoryStore {\r\n  constructor() {\r\n    makeObservable(this)\r\n  }\r\n\r\n  @observable list = [];\r\n  @observable isLoading = false;\r\n  @observable hasMore = true;\r\n  @observable page = 0;\r\n  limit = 10;\r\n\r\n  @action append(newList) {\r\n    this.list = this.list.concat(newList)\r\n  }\r\n\r\n  @action find() {\r\n    this.isLoading = true;\r\n    Uploader.find({\r\n      page: this.page,\r\n      limit: this.limit\r\n    }).then((newList) => {\r\n      this.append(newList)\r\n      this.page++;\r\n      if (newList.length < this.limit) {\r\n        this.hasMore = false\r\n      }\r\n    }).catch((error) => {\r\n      console.log(error)\r\n      message.error(\"加载失败\")\r\n    }).finally(() => {\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  @action reset() {\r\n    this.list = [];\r\n    this.isLoading = false;\r\n    this.hasMore = true;\r\n    this.page = 0;\r\n  }\r\n}\r\n\r\nexport default new HistoryStore()","/*\r\n*   作用: 用来管理图片上传的状态\r\n* */\r\nimport {observable, action,makeObservable} from \"mobx\";\r\nimport {Uploader} from \"../models/index\"\r\nimport {message} from \"antd\";\r\n\r\n\r\nclass ImageStores {\r\n  constructor() {\r\n    makeObservable(this)\r\n  }\r\n\r\n  @observable filename = \"\";\r\n  @observable file = null;\r\n  @observable isUploading = false;\r\n  @observable serverFile = null\r\n\r\n\r\n  @action setFilename(newFilename){\r\n    this.filename = newFilename\r\n  }\r\n  @action setFile(newFile){\r\n    this.file = newFile\r\n  }\r\n  @action upload(){\r\n    this.isUploading = true;\r\n    this.serverFile = null;\r\n    return new Promise((resolve,reject)=>{\r\n      Uploader.add(this.file,this.filename).then((serverFile)=>{\r\n        console.log(\"上传成功\")\r\n        this.serverFile = serverFile\r\n        resolve(serverFile)\r\n      }).catch(err=>{\r\n        message.error(\"上传失败\")\r\n        reject(err)\r\n      }).finally(()=>{\r\n        this.isUploading = false;\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  @action reset(){\r\n    this.isUploading = false;\r\n    this.serverFile = null;\r\n  }\r\n\r\n}\r\nexport default new ImageStores()","/*\r\n*   作用: 专门用来维护注册和登录的状态和行为\r\n* */\r\nimport {observable, action,makeObservable} from \"mobx\";\r\nimport {Auth} from \"../models/index\"\r\nimport UserStore from \"./user\";\r\nimport HistoryStore from \"./history\"\r\nimport ImageStores from \"./image\"\r\nimport {message} from \"antd\";\r\n\r\nclass AuthStore {\r\n  constructor() {\r\n    makeObservable(this)\r\n  }\r\n  @observable values = {\r\n    username:\"\",\r\n    password:\"\"\r\n  }\r\n  @action setIsLogin(isLogin){\r\n    this.isLogin = isLogin;\r\n  }\r\n  @action setUsername(username){\r\n    this.values.username = username\r\n  }\r\n  @action setPassword(password){\r\n    this.values.password = password\r\n  }\r\n  @action login(){\r\n    return new Promise((resolve,reject)=>{\r\n      Auth.login(this.values.username,this.values.password).then((user)=>{\r\n        UserStore.pullUser()\r\n        resolve(user)\r\n      }).catch((error)=>{\r\n        UserStore.resetUser()\r\n        message.error(\"登录失败\")\r\n        reject(error)\r\n      })\r\n    })\r\n  }\r\n  @action register(){\r\n    return new Promise((resolve,reject)=>{\r\n      Auth.register(this.values.username,this.values.password).then((user)=>{\r\n        UserStore.pullUser()\r\n        resolve(user)\r\n      }).catch((error)=>{\r\n        UserStore.resetUser()\r\n        message.error(\"注册失败\")\r\n        reject(error)\r\n      })\r\n    })\r\n  }\r\n  @action logout(){\r\n    Auth.logout();\r\n    UserStore.resetUser();\r\n    HistoryStore.reset();\r\n    ImageStores.reset();\r\n  }\r\n\r\n\r\n\r\n}\r\nexport default new AuthStore()","import {createContext,useContext} from \"react\"\r\nimport AuthStore from \"./auth\"\r\nimport UserStore from \"./user\"\r\nimport ImageStore from \"./image\"\r\nimport HistoryStore from \"./history\"\r\nconst context = createContext({\r\n  AuthStore,\r\n  UserStore,\r\n  ImageStore,\r\n  HistoryStore\r\n});\r\n\r\n\r\nexport const useStores = ()=>{\r\n  return useContext(context)\r\n}\r\n"],"sourceRoot":""}