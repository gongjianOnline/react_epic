{"version":3,"sources":["components/List.js","pages/History.js"],"names":["Img","styled","img","Component","observer","HistoryStore","useStores","options","initialLoad","pageStart","loadMore","find","useWindow","useEffect","console","log","reset","hasMore","isLoading","dataSource","list","renderItem","item","Item","src","attributes","url","alt","filename","target","href","id","tip","History","List"],"mappings":"sMAOMA,EAAMC,IAAOC,IAAV,gHA6DMC,EAtDGC,aAAS,WAAK,IACvBC,EAAgBC,cAAhBD,aAIDE,EAAU,CACdC,aAAY,EACZC,UAAU,EACVC,SANe,WACfL,EAAaM,QAMbC,WAAU,GAYZ,OAVAC,qBAAU,WAIR,OAHAC,QAAQC,IAAI,4BAGL,WACLD,QAAQC,IAAI,wCACZV,EAAaW,WAEf,IAGA,mCACE,cAAC,IAAD,2BAAoBT,GAApB,IACgBU,SAAUZ,EAAaa,WAAab,EAAaY,QADjE,SAEE,cAAC,IAAD,CACEE,WAAYd,EAAae,KACzBC,WACE,SAACC,GACC,OAAO,eAAC,IAAKC,KAAN,WACL,8BACE,cAACvB,EAAD,CAAKwB,IAAKF,EAAKG,WAAWC,IAAID,WAAWC,IAAKC,IAAI,OAEpD,8BACE,6BAAKL,EAAKG,WAAWG,aAEvB,8BACE,mBAAGC,OAAO,SAASC,KAAMR,EAAKG,WAAWC,IAAID,WAAWC,IAAxD,8BARmBJ,EAAKS,KAJlC,SAkBE1B,EAAaa,WAAab,EAAaY,SACrC,8BACE,cAAC,IAAD,CAAMe,IAAI,mCCjDTC,UARf,WACE,OACE,qCACE,0DACA,cAACC,EAAD","file":"static/js/8.d9e75b47.chunk.js","sourcesContent":["import React,{useEffect} from \"react\"\r\nimport {observer} from\"mobx-react\"\r\nimport {useStores} from \"../stores\"\r\nimport { List, message, Avatar, Spin } from 'antd';\r\nimport InfiniteScroll from 'react-infinite-scroller';\r\nimport styled from \"styled-components\"\r\n\r\nconst Img = styled.img`\r\n  width: 100px;\r\n  height: 120px;\r\n  object-fit:contain;\r\n  border:1px solid #eee;\r\n`\r\n\r\nconst Component = observer(()=>{\r\n  const {HistoryStore} = useStores();\r\n  const loadMore = ()=>{\r\n    HistoryStore.find();\r\n  }\r\n  const options = {\r\n    initialLoad:true,\r\n    pageStart:0,\r\n    loadMore:loadMore,\r\n    useWindow:true\r\n  }\r\n  useEffect(()=>{\r\n    console.log(\"进入组件\")\r\n\r\n\r\n    return ()=>{\r\n      console.log(\"列表组件卸载\");\r\n      HistoryStore.reset();\r\n    }\r\n  },[])\r\n\r\n  return (\r\n    <>\r\n      <InfiniteScroll {...options}\r\n                      hasMore={!HistoryStore.isLoading && HistoryStore.hasMore}>\r\n        <List\r\n          dataSource={HistoryStore.list}\r\n          renderItem={\r\n            (item)=>{\r\n              return <List.Item key={item.id}>\r\n                <div>\r\n                  <Img src={item.attributes.url.attributes.url} alt=\"\"/>\r\n                </div>\r\n                <div>\r\n                  <h5>{item.attributes.filename}</h5>\r\n                </div>\r\n                <div>\r\n                  <a target=\"_blank\" href={item.attributes.url.attributes.url}>查看</a>\r\n                </div>\r\n              </List.Item>\r\n            }\r\n          }>\r\n        {\r\n          HistoryStore.isLoading && HistoryStore.hasMore && (\r\n            <div>\r\n              <Spin tip=\"加载中\"/>\r\n            </div>\r\n          )\r\n        }\r\n        </List>\r\n      </InfiniteScroll>\r\n    </>\r\n  )\r\n})\r\nexport default Component","import React from \"react\"\r\nimport List from \"../components/List\"\r\nfunction History(){\r\n  return(\r\n    <>\r\n      <h1>上传历史</h1>\r\n      <List></List>\r\n    </>\r\n  )\r\n}\r\nexport default History"],"sourceRoot":""}